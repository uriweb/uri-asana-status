!function(){function t(t,s){const e=Number(t.rid.split("-")[1]),a=Number(s.rid.split("-")[1]);return e>a?-1:e<a?1:0}window.addEventListener("load",(async()=>{const s={parent:document.getElementById("uri-asana-status")};if(null===s.parent)return!1;s.message=s.parent.getElementsByClassName("uri-asana-status-message")[0];const e={accept:"application/json",authorization:`Bearer ${uriAsanaStatus.token}`};!async function(t,s){const e=await fetch("https://app.asana.com/api/1.0/users/me",{headers:t});if(!e.ok)s.message.innerHTML="Your personal access token is invalid. For documentation, see: https://developers.asana.com/docs/personal-access-token"}(e,s);const a=await async function(t,s,e){e.message.innerHTML='<span class="loading"></span>Loading...';try{let e=await async function(t,s){const e={method:"GET",headers:s},a=10;let n=0;for(;n<a;){const s=await fetch(`https://app.asana.com/api/1.0/projects/${t}/tasks?opt_fields=custom_fields.name,custom_fields.display_value&completed_since=now&opt_pretty=true`,e);if(200===s.status){return(await s.json()).data}if(s.status>=400&&429!==s.status&&500!==s.status){console.error("Could not retrieve tasks");break}n++;const a=n*n*120;await new Promise((t=>setTimeout(t,a)))}return[]}(t,s);const a=new Array;for(const t in e){let s=e[t],n={};for(const t in s.custom_fields){let e=s.custom_fields[t];switch(e.name){case"RID":n.rid=e.display_value;break;case"Status":n.status=e.display_value}}a.push(n)}return a}catch(t){console.error(t),e.message.innerHTML="Something went wrong... inpect the page to view the dev console or wait and try again"}}(uriAsanaStatus.project,e,s);!function(s,e){s.sort(t);let a=document.createElement("ul");a.classList="uri-asana-results type-mono";for(let t in s){let e=s[t],n=document.createElement("li");if(!0===uriAsanaStatus.simplify||"true"===uriAsanaStatus.simplify)switch(e.status){case"Request":e.status="Recieved";break;case"Scoping":e.status="Evaluating";break;default:e.status="In Progress"}n.classList=`task ${e.status.toLowerCase().replace(" ","-")}`;let i=`<div class="task-id">${e.rid}</div>`;i+=`<div class="task-status">${e.status}</div>`,n.innerHTML=i,a.appendChild(n)}e.message.innerHTML=`There are <span>${s.length} tasks</span> in the queue:`,e.parent.appendChild(a)}(a,s)}),!1)}();